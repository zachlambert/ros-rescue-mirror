<?xml version="1.0"?>
<robot name="simple">

<link name="base_link"></link>
<joint name="base_joint" type="fixed">
    <parent link="base_link"/>
    <child link="body"/>
</joint>

<link name="body">
<visual>
    <geometry>
        <box size="0.6 0.4 0.1"/>
    </geometry>
    <origin xyz="-0.1 0 0"/>
</visual>
<collision>
    <geometry>
        <box size="0.6 0.4 0.1"/>
    </geometry>
    <origin xyz="-0.1 0 0"/>
</collision>
<inertial>
    <mass value="0.5"/>
    <inertia
        ixx="0.0071"
        iyy="0.0154"
        izz="0.0217"
        ixy="0" ixz="0" iyz="0"
    />
    <origin xyz="-0.1 0 0"/>
</inertial>

<visual>
    <geometry>
        <sphere radius="0.05"/>
    </geometry>
    <origin xyz="-0.35 0 -0.05"/>
</visual>
<collision>
    <geometry>
        <sphere radius="0.05"/>
    </geometry>
    <origin xyz="-0.35 0 -0.05"/>
</collision>
<inertial>
    <mass value="0.05"/>
    <inertia
        ixx="0.00005"
        iyy="0.00005"
        izz="0.00005"
        ixy="0" ixz="0" iyz="0"
    />
    <origin xyz="-0.35 0 -0.05"/>
</inertial>

</link>

<link name="wheel_right">
<visual>
    <geometry>
        <cylinder length="0.05" radius="0.1"/>
    </geometry>
    <origin xyz="0 0 0.025"/>
</visual>
<collision>
    <geometry>
        <cylinder length="0.05" radius="0.1"/>
    </geometry>
    <origin xyz="0 0 0.025"/>
</collision>
<inertial>
    <mass value="0.1"/>
    <inertia
        ixx="0.000146"
        iyy="0.000146"
        izz="0.0005"
        ixy="0" ixz="0" iyz="0"
    />
    <origin xyz="0 0 0.025"/>
</inertial>
</link>

<link name="wheel_left">
<visual>
    <geometry>
        <cylinder length="0.05" radius="0.1"/>
    </geometry>
    <origin xyz="0 0 0.025"/>
</visual>
<collision>
    <geometry>
        <cylinder length="0.05" radius="0.1"/>
    </geometry>
    <origin xyz="0 0 0.025"/>
</collision>
<inertial>
    <mass value="0.1"/>
    <inertia
        ixx="0.000146"
        iyy="0.000146"
        izz="0.0005"
        ixy="0" ixz="0" iyz="0"
    />
    <origin xyz="0 0 0.025"/>
</inertial>
</link>

<link name="camera">
<visual>
    <geometry>
        <box size="0.04 0.04 0.04"/>
    </geometry>
    <origin xyz="0 0 0.02"/>
</visual>
<collision>
    <geometry>
        <box size="0.04 0.04 0.04"/>
    </geometry>
    <origin xyz="0 0 0.02"/>
</collision>
<inertial>
    <mass value="0.05"/>
    <inertia
        ixx="0.0000133"
        iyy="0.0000133"
        izz="0.0000133"
        ixy="0" ixz="0" iyz="0"
    />
    <origin xyz="0 0 0.02"/>
</inertial>
</link>

<joint name="wheel_right" type="continuous">
    <parent link="body"/>
    <child link="wheel_right"/>
    <origin xyz="0 -0.2 0" rpy="1.571 0 0"/>
    <axis xyz="0 0 -1"/>
</joint>

<joint name="wheel_left" type="continuous">
    <parent link="body"/>
    <child link="wheel_left"/>
    <origin xyz="0 0.2 0" rpy="-1.571 0 0"/>
    <axis xyz="0 0 1"/>
</joint>

<joint name="camera" type="fixed">
    <parent link="body"/>
    <child link="camera"/>
    <origin xyz="0.16 0 0.05"/>
</joint>

<gazebo>
<plugin filename="libgazebo_ros_control.so" name="control"/>
</gazebo>

<transmission name="wheel_right_tran">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="wheel_right">
        <hardwareInterface>VelocityJointInterface</hardwareInterface>
    </joint>
    <actuator name="wheel_right_actr">
        <hardwareInterface>VelocityJointInterface</hardwareInterface>
        <mechanicalReduction>1</mechanicalReduction>
    </actuator>
</transmission>

<transmission name="wheel_left_tran">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="wheel_left">
        <hardwareInterface>VelocityJointInterface</hardwareInterface>
    </joint>
    <actuator name="wheel_left_actr">
        <hardwareInterface>VelocityJointInterface</hardwareInterface>
        <mechanicalReduction>1</mechanicalReduction>
    </actuator>
</transmission>

<gazebo reference="camera">
    <sensor type="multicamera" name="stereo_camera">
        <update_rate>30.0</update_rate>
        <camera name="left">
            <pose>0 0.035 0 0 0 0</pose>
            <horizontal_fov>1.3962634</horizontal_fov>
            <image>
                <width>800</width>
                <height>800</height>
                <format>R8G8B8</format>
            </image>
            <clip>
                <near>0.02</near>
                <far>300</far>
            </clip>
            <noise>
                <type>gaussian</type>
                <mean>0.0</mean>
                <stddev>0.007</stddev>
            </noise>
        </camera>
        <camera name="right">
            <pose>0 -0.035 0 0 0 0</pose>
            <horizontal_fov>1.3962634</horizontal_fov>
            <image>
                <width>800</width>
                <height>800</height>
                <format>R8G8B8</format>
            </image>
            <clip>
                <near>0.02</near>
                <far>300</far>
            </clip>
            <noise>
                <type>gaussian</type>
                <mean>0.0</mean>
                <stddev>0.007</stddev>
            </noise>
        </camera>
        <plugin name="stereo_camera_controller" filename="libgazebo_ros_multicamera.so">
            <alwaysOn>true</alwaysOn>
            <updateRate>0.0</updateRate>
            <cameraName>camera</cameraName>
            <imageTopicName>image_raw</imageTopicName>
            <cameraInfoTopicName>camera_info</cameraInfoTopicName>
            <frameName>camera</frameName>
            <hackBaseline>0.07</hackBaseline>
            <distortionK1>0.0</distortionK1>
            <distortionK2>0.0</distortionK2>
            <distortionK3>0.0</distortionK3>
            <distortionT1>0.0</distortionT1>
            <distortionT2>0.0</distortionT2>
        </plugin>
    </sensor>
</gazebo>

<gazebo>
    <plugin name="imu_plugin" filename="libgazebo_ros_imu.so">
        <alwaysOn>true</alwaysOn>
        <bodyName>camera</bodyName>
        <topicName>imu</topicName>
        <serviceName>imu_service</serviceName>
        <gaussianNoise>0.0</gaussianNoise>
        <updateRate>20.0</updateRate>
    </plugin>
</gazebo>

</robot>
