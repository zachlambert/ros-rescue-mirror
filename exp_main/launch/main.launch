<launch>
    <param
        name="robot_description"
        command="cat $(find exp_description)/model/simple.urdf"
    />

    <!-- Assumes that gzserver is running -->
    <node
        name="spawn_model"
        pkg="gazebo_ros"
        type="spawn_model"
        args="-param robot_description -urdf -x 0 -y 0 -z 0.1 -model simple -b -gazebo_namespace gzserver"
    />

    <node
        name="robot_state_publisher"
        pkg="robot_state_publisher"
        type="robot_state_publisher"
        respawn="false"
        output="screen">
    </node>

    <rosparam
        file="$(find exp_main)/config/controllers.yaml"
        command="load"
    />

    <node
        name="controller_spawner"
        pkg="controller_manager"
        type="spawner"
        respawn="false"
        args="diff_drive_controller joint_state_controller"
    />

    <node
        name="rqt_gui"
        pkg="rqt_gui"
        type="rqt_gui"
        args="--perspective-file $(find exp_main)/config/rqt_control.perspective"
    />

    <node
        name="image_view_right"
        pkg="image_view"
        type="image_view"
        args="image:=/camera/right/image_raw"
    />
    <node
        name="image_view_left"
        pkg="image_view"
        type="image_view"
        args="image:=/camera/left/image_raw"
    />

</launch>
