# Overview of packages

See individual package READMEs for more detail.

- Main package for running the robot
    - **arbie_bringup**: Contains a launch file for starting the robot with all subsystems.
- Packages for testing and debugging
    - **arbie_test**: Contains launch files for testing different parts of the system, both for the real robot and simulation.
    - **arbie_gazebo**: Defines gazebo worlds for simulation, and launch files for starting the gazebo server with these worlds.
    - **arbie_utils**: Helper launch files and nodes for debugging purposes.
- Packages for different subsystems
    - **arbie_description**: Defines the robot model with an urdf file. Contains a number of variations of the model used for testing purposes.
    - **arbie_msgs**: Defines custom msg and srv types.
    - **arbie_hardware**: Nodes for driving robot joints and a controller manager node to provide an interface for these drivers.
    - **arbie_webgui**: Contains the html/css/javascript for the webgui, in the www subdirectory, which provides a web interface for monitoring and controlling the robot.
    - **arbie_teleop**: Provides the gamepad node for processing Xbox controller inputs, with a launch file for running this or a keyboard teleoperation node for when not using an Xbox controller.
    - **arbie_moveit_config**: Package generated by moveit_setup_assistant. Used to start the move_group node, which provides services for planning and executing trajectories for the robot arm.
    - **arbie_manipulation**: Listens to end effector velocity commands and drives the arm in real time. Can also move a planned end effector pose and execute commands for moving to this pose.
    - **arbie_slam**: Contains launch files for loading the reasense cameras used by slam, and starting the rtabmap_ros node which performs slam.
- External dependencies (git submodules):
    - **realsense_ros_gazebo**: Urdf macros for defining the realsense cameras and gazebo options for simulating the camera inputs.
    - **robotics_group_upatras_gazebo_plugins**: Contains the mimic_joint gazebo plugin, used to drive the end effector joints appropriately. 

# Starting the robot

`roslaunch arbie_bringup bringup.launch`

`arbie_bringup` contains the main launch file and launch files for subsystems.  
For testing individual systems in isolation, the `arbie_test` package has various launch files.

# Testing subsystems

## Testing with hardware

Test basic arm control:  
`roslaunch arbie_test arm.launch`

Todo: Tests for MoveIt, base control, slam.

## Testing in simulation

Must first start `gzserver` with an appropriate world:  
`roslaunch arbie_gazebo navigation.launch` which has checkered obstacles.  
`roslaunch arbie_gazebo manipulation.launch` (currently just empty, but may add objects to pick up).  

To view the simulation:  
`rosrun gazebo_ros gzclient`

Test basic arm control:  
`roslaunch arbie_test sim_arm.launch`

Test base control on its own, or with slam:  
`roslaunch arbie_test sim_base.launch`  
`roslaunch arbie_test sim_base_slam.launch`

Todo: Test for MoveIt.

# Viewing the web gui

The final robot and some tests will start the webgui for monitoring and user input.  
Hosts the `www` folders within ros packages.  

The web gui content is in `arbie_webgui/www`, view at the url:  
`localhost:8000/arbie_webgui`