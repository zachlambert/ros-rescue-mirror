# Starting the robot

Start the full robot:  
`roslaunch arbie_bringup arbie.launch`

This uses a webserver for teleoperation, which can be viewed at:  
`localhost:8000/arbie_webgui`

# Testing subsystems

The `arbie_test` package contains launch files for running specific subsystems and testing in simulation.  

Testing arm control:  
`roslaunch arbie_test arm.launch`

Testing arm control in simulation:   
`roslaunch arbie_gazebo manipulation.launch`  
`roslaunch arbie_test sim_arm.launch`

Testing base control in simulation with slam:  
`roslaunch arbie_gazebo navigation.launch`  
`roslaunch arbie_test sim_base.launch`  
`roslaunch arbie_slam slam.launch`

Testing the realsense cameras with slam:  
`roslaunch arbie_test test_cameras.launch`  
`roslaunch arbie_slam slam.launch`

When testing in simulation, the `arbie_gazebo` launch file will start the gazebo server with a specific world.  
When restarting the robot, this can be left open. Stopping and starting the other nodes will make the robot despawn then spawn back in.

The gazebo client isn't necessary, but can be useful for directly interacting with the simulation.  
Start with: `rosrun gazebo_ros gzclient`

# Overview of packages

## Packages for running the robot

**arbie_bringup**: Contains a launch file for starting the robot with all subsystems.

**arbie_test**: Contains launch files for testing different parts of the system, both for the real robot and simulation.

**arbie_gazebo**: Defines gazebo worlds for simulation, and launch files for starting the gazebo server with these worlds.

## Robot model and control

**arbie_description**
- Defines the robot model with an urdf file. Contains a number of variations of the model used for testing purposes.
- Also contains configuration for ros_control and launch files for spawning controllers for different parts of the robot.

**arbie_hardware**:
- Contains configuration for usb ports of hardware drivers and main pcb.
- Nodes for driving robot joints and a controller manager node to provide an interface for these drivers.
- Contains a launch file for connecting to the hardware drivers and pcb, and starting the hardware interface.
- Not necessary for simulation, where the gazebo server simulates the hardware instead, and also provides a hardware interface.

## Teleoperation

**arbie_webgui**:
- Contains the html/css/javascript for the webgui, in the www subdirectory.
- Provides an interface for monitoring and controlling the robot.

**arbie_teleop**:
- Provides the gamepad node for processing Xbox controller inputs.
- Contains a launch file for starting the webgui, gamepad node, and other required nodes.

## Manipulation

**arbie_moveit_config**:  
- Package generated by moveit_setup_assistant.
- Used to start the move_group node, which provides services for planning and executing trajectories for the robot arm.

**arbie_manipulation**:
- Listens to end effector velocity commands and drives the arm in real time.
- Can also move a planned end effector pose and execute commands for moving to this pose.

## SLAM and navigation

**arbie_slam**:
- Contains a launch file for starting the realsense cameras.
- Contains a launch file for starting rtabmap_ros, which performs slam and can also plan trajectories.
- Provides a node for setting the odometry transform.

## Dependencies

**arbie_msgs**: Defines custom msg and srv types used by other packages.

The packages below are git submodules:

**realsense_ros_gazebo**: Urdf macros for defining the realsense cameras and gazebo options for simulating the camera inputs.

**robotics_group_upatras_gazebo_plugins**: Contains the mimic_joint gazebo plugin, used to drive the end effector joints appropriately. 