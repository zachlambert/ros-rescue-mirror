<launch>
    <arg name="fake" default="false"/>

    <param
        name="robot_description"
        command="xacro $(find arbie_description)/model/arbie.urdf.xacro"
    />
    <rosparam
        file="$(find arbie_description)/config/controllers.yaml"
        command="load"
    />
    <rosparam
        file="$(find arbie_hardware)/config/usb.yaml"
        command="load"
    />

    <node name="odrives" pkg="arbie_hardware" type="odrives" output="screen"/>
    <group unless="$(arg fake)">
    <node
        name="hardware"
        pkg="arbie_hardware"
        type="hardware"
        output="screen"
    />
    </group>

    <group if="$(arg fake)">
    <node
        name="hardware"
        pkg="arbie_hardware"
        type="hardware_fake"
        output="screen"
    />
    </group>

    <node
        name="robot_state_publisher"
        pkg="robot_state_publisher"
        type="robot_state_publisher"
        respawn="false"
        output="screen"
    />

    <node
        name="arbie_controller_spawner"
        pkg="arbie_hardware"
        type="spawner"
        respawn="false"
        output="screen"
    />

</launch>
